
let dropArea=document.getElementById("dropZone");
let browserFileData=document.getElementById("fileBrowser");
let submit=document.getElementById("browserSubmission");
let fileUpload__button=document.getElementById("file-upload__button")
let displayFile__name=document.getElementById("displayFile__name")
let filePath__glob="";

//when the file upload button is clicked call the file input
fileUpload__button.addEventListener("click",()=>{
    browserFileData.click();

});

//when data is changed on the file input update the display, update global path too
browserFileData.addEventListener("change",()=>{
  displayFile__name.innerHTML=browserFileData.files[0].path;
  filePath__glob=browserFileData.files[0].path;
});

//Legacy to allow drop to function properly
dropArea.addEventListener("dragover",evt=> {
  evt.preventDefault();
});

//when you drop into the box update the global path
dropArea.addEventListener("drop", evt=> {
  evt.preventDefault();
  console.log("File Dropped");
  let fileInfo = evt.dataTransfer.files[0].path;
  console.log(fileInfo);
  let verdict = document.getElementById("verdict")
  verdict.innerText = "Loading..."
  displayFile__name.innerHTML=fileInfo;
  filePath__glob=fileInfo;
  });

  //submit global path
submit.addEventListener("click", ()=>{
  let fileData=filePath__glob;
  if(fileData.value==""){
    console.log(fileData);
    alert("No file entered");
  }
  else{
    ipcRenderer.send("filePath",fileData);
    browserFileData.value="";
    let verdict = document.getElementById("verdict")
    verdict.innerText = "Loading..."
    displayFile__name.innerHTML="";
    filePath__glob="";
  }
});